# Metodologia punktacji clickbaitu

## Spis treÅ›ci
1. [Podstawy systemu](#podstawy-systemu)
2. [Punkty dodatnie - cechy clickbaitowe](#punkty-dodatnie---cechy-clickbaitowe)
3. [Punkty ujemne - cechy wiarygodne](#punkty-ujemne---cechy-wiarygodne)
4. [Trafienia semantyczne](#trafienia-semantyczne)
5. [KoÅ„cowe przeliczenie](#koÅ„cowe-przeliczenie)
6. [Etykiety i interpretacja](#etykiety-i-interpretacja)
7. [PrzykÅ‚ad kalkulacji](#przykÅ‚ad-kalkulacji)
8. [Kluczowe zasady](#kluczowe-zasady)

---

## Podstawy systemu

System dziaÅ‚a na zasadzie **dodawania i odejmowania punktÃ³w** za rÃ³Å¼ne cechy wykryte w tytule i treÅ›ci artykuÅ‚u. KoÅ„cowy wynik (score) jest **normalizowany do skali 0-100** i przypisywany do kategorii.

### Wagi kanaÅ‚Ã³w
- **TytuÅ‚**: 40% (najwaÅ¼niejszy - pierwsze wraÅ¼enie czytelnika)
- **RozbieÅ¼noÅ›ci (mismatch)**: 40% (czy treÅ›Ä‡ potwierdza obietnice z tytuÅ‚u)
- **TreÅ›Ä‡**: 15% (cechy sensacyjne w tekÅ›cie)
- **Monetyzacja**: 5% (affiliate links, kupony)

---

## Punkty dodatnie - cechy clickbaitowe

### 1. TYTUÅ (title_features) - waga: 40%

#### ğŸ”¥ **Sensational phrases** (frazy sensacyjne) - NAJWYÅ»EJ PUNKTOWANE
**+12 pkt za kaÅ¼de trafienie** (cap: 36 pkt max)

Wykrywane sÅ‚owa:
- **Kuriozalne sytuacje**: `kuriozalne`, `absurdalne`, `wywraca naukÄ™ do gÃ³ry nogami`
- **Zmiana historii**: `odmieniÅ‚a`, `zmienia caÅ‚Ä… historiÄ™`
- **Szok i sensacja**: `szok`, `wstrzÄ…s`, `poraÅ¼ajÄ…cy`, `niewiarygodne`, `niebywaÅ‚e`, `niesÅ‚ychane`, `niesamowite`, `zaskakujÄ…ce`
- **Skandale**: `afera`, `skandal`, `dramat`, `horror`, `tragedia`, `masakra`
- **Virale**: `bomba`, `hit`, `viral`, `game changer`
- **Apokalipsa**: `to koniec`, `koniec Å›wiata`
- **Tajemnice**: `ujawnione`, `zdemaskowane`, `tajemnice`, `sekrety`, `wyciek`

**PrzykÅ‚ad**: "SzokujÄ…ce odkrycie! Naukowcy ujawnili tajemnicÄ™" â†’ +12 (szokujÄ…ce) +12 (ujawnili) +12 (tajemnicÄ™) = **+36 pkt**

---

#### âš ï¸ **Alarming frames** (alarmujÄ…ce ramy)
**+10 pkt za kaÅ¼de trafienie** (cap: 20 pkt max)

Wykrywane sÅ‚owa:
- **Katastrofy**: `wybuchy`, `eskalacja`, `katastrofa`, `kataklizm`, `armagedon`, `apokalipsa`
- **Kryzysy**: `kryzys`, `chaos`, `zaÅ‚amanie`, `krach`, `bessa`, `zapaÅ›Ä‡`, `blackout`
- **Awarie**: `awaria`, `paraliÅ¼`
- **ZagroÅ¼enia**: `na skraju`, `na krawÄ™dzi`, `tuÅ¼ przed`, `grozi`, `zagroÅ¼enie`, `ostrzeÅ¼enie`, `alert`, `alert RCB`
- **Stany wyjÄ…tkowe**: `stan wyjÄ…tkowy`, `stan klÄ™ski`, `ewakuacja`, `lockdown`, `epidemia`, `pandemia`

**PrzykÅ‚ad**: "Kryzys na krawÄ™dzi! Alert RCB dla caÅ‚ego kraju" â†’ +10 (kryzys) +10 (na krawÄ™dzi) = **+20 pkt (cap)**

---

#### ğŸš« **Absolutes** (absolutne stwierdzenia)
**+8 pkt za kaÅ¼de trafienie** (cap: 24 pkt max)

Wykrywane sÅ‚owa:
- `zawsze`, `nigdy`, `wszyscy`, `wszystko`, `kaÅ¼dy`
- `na pewno`, `z pewnoÅ›ciÄ…`, `bez wÄ…tpienia`, `bezsprzecznie`
- `bez dwÃ³ch zdaÅ„`, `koniec kropka`, `koniec dyskusji`
- `sto procent`, `100%`, `gwarantowane`

**PrzykÅ‚ad**: "KaÅ¼dy to robi Åºle! Nigdy wiÄ™cej popeÅ‚nisz tego bÅ‚Ä™du" â†’ +8 (kaÅ¼dy) +8 (nigdy) = **+16 pkt**

---

#### ğŸ” **Curiosity gap** (luka ciekawoÅ›ci)
**+6 pkt za kaÅ¼de trafienie** (cap: 18 pkt max)

Wykrywane frazy:
- **Triki**: `ten (jeden) trik`, `sztuczka`, `lifehack`, `hack`
- **CTA**: `sprawdÅº (jak/co)`, `zobacz (jak/co siÄ™ staÅ‚o)`
- **Niedowierzanie**: `nie uwierzysz`, `nie zgadniesz`
- **Obietnice**: `oto dlaczego`, `oto jak`, `oto co siÄ™ stanie`
- **Sekrety**: `poznaj prawdÄ™`, `poznaj sekret`, `to musisz zobaczyÄ‡`

**PrzykÅ‚ad**: "Nie uwierzysz! SprawdÅº ten trik, ktÃ³ry odmieni twoje Å¼ycie" â†’ +6 (nie uwierzysz) +6 (sprawdÅº) +6 (ten trik) = **+18 pkt (cap)**

---

#### ğŸ“‹ **Listicle** (listy numeryczne)
**+6 pkt za kaÅ¼de trafienie** (cap: 12 pkt max)

Wykrywane frazy:
- `top`, `ranking`, `lista`
- `X powodÃ³w`, `X rzeczy`, `X faktÃ³w`, `X sekretÃ³w`
- `X sposobÃ³w`, `X bÅ‚Ä™dÃ³w`, `X porad`, `X krokÃ³w`
- `X przepisÃ³w`, `X przykÅ‚adÃ³w`, `X funkcji`, `X zmian`
- `X mitÃ³w`, `X trikÃ³w`

**PrzykÅ‚ad**: "Top 10 sekretÃ³w! 5 sposobÃ³w na sukces" â†’ +6 (top) +6 (sekretÃ³w) = **+12 pkt (cap)**

---

#### âš½ **Sports rumor** (plotki sportowe)
**+10 pkt za kaÅ¼de trafienie** (cap: 20 pkt max)

Wykrywane sÅ‚owa:
- **Oficjalne**: `oficjalnie`, `potwierdzone`
- **Transfery**: `transfer`, `hit transferowy`, `bomba transferowa`, `dopiÄ™te`, `dogadane`, `podpisane`, `kontrakt`
- **OdejÅ›cia**: `odchodzi`, `rozstaje siÄ™`, `wylatuje`, `zwolniony`, `dymisja`, `ultimatum`
- **Plotki**: `sensacja okienka`, `plotki`, `kulisy`, `zakulisowe`

**PrzykÅ‚ad**: "Bomba transferowa! Lewandowski dogadany, oficjalnie odchodzi" â†’ +10 (bomba) +10 (oficjalnie) = **+20 pkt (cap)**

---

#### ğŸ¯ **Superlatives** (przesada, superlatywy)
**+6 pkt za kaÅ¼de trafienie** (cap: 18 pkt max)

Wykrywane sÅ‚owa:
- `najlepszy`, `najwiÄ™kszy`, `najgorszy`, `najszybszy`, `najmocniejszy`, etc.

**PrzykÅ‚ad**: "Najlepszy sposÃ³b! NajwiÄ™ksza rewolucja w historii" â†’ +6 (najlepszy) +6 (najwiÄ™ksza) = **+12 pkt**

---

#### â— **Interpunkcja** (punctuation signals)

| Element | Punkty | Cap | PrzykÅ‚ad |
|---------|--------|-----|----------|
| **Wykrzykniki** | +3 za kaÅ¼dy | 9 pkt | "Szok! Rewelacja! Nie uwierzysz!" â†’ +9 pkt |
| **Pytajnik na koÅ„cu** | +4 | - | "Czy to koniec Polski?" â†’ +4 pkt |
| **Wielokropek** | +2 za kaÅ¼dy | 6 pkt | "Oto co siÄ™ staÅ‚o... Nikt tego nie widziaÅ‚..." â†’ +4 pkt |
| **CAPSLOCK (wysoki ratio)** | +6 | - | "NIE UWIERZYSZ CO SIÄ˜ STAÅO" â†’ +6 pkt |
| **Emoji** | +4 | - | "Szok ğŸ˜± Nie uwierzysz ğŸ”¥" â†’ +4 pkt |

---

**âš ï¸ CAP dla caÅ‚ego kanaÅ‚u TYTUÅ: 60 pkt**

---

### 2. TREÅšÄ† (content_features) - waga: 15%

#### ğŸ”¥ **Sensational phrases** (frazy sensacyjne w treÅ›ci)
**+8 pkt za kaÅ¼de trafienie** (cap: 24 pkt max)

- **To SAMO regex co w tytule** (wszystkie frazy sensacyjne + alarming)
- âš ï¸ **WYMÃ“G**: Musi wystÄ…piÄ‡ w **minimum 2 rÃ³Å¼nych oknach** (z 5 okien prÃ³bkowania treÅ›ci)
- Okna: start (0%), 25%, 50%, 75%, koniec (100%) - kaÅ¼de po 600 znakÃ³w z overlap 50 znakÃ³w

**PrzykÅ‚ad**: JeÅ›li "szokujÄ…ce" wystÄ™puje tylko na poczÄ…tku â†’ **0 pkt**. JeÅ›li wystÄ™puje na poczÄ…tku i w Å›rodku â†’ **+8 pkt**.

---

#### ğŸ’¯ **Overcertainty** (nadmierna pewnoÅ›Ä‡)
**+6 pkt za kaÅ¼de trafienie** (cap: 18 pkt max)

Wykrywane frazy:
- `na pewno`, `bezsprzecznie`, `niezbicie dowodzi`, `koniec dyskusji`

âš ï¸ **WAÅ»NA ZASADA**: JeÅ›li w tekÅ›cie wykryto **hedging** (`moÅ¼e`, `prawdopodobnie`), overcertainty **NIE jest liczone** (mutual exclusion - hedging wygrywa).

**PrzykÅ‚ad**: 
- Tekst: "Na pewno to dziaÅ‚a. Bezsprzecznie udowodnione." â†’ +6 (na pewno) +6 (bezsprzecznie) = **+12 pkt**
- Tekst: "Na pewno to dziaÅ‚a. MoÅ¼e to zadziaÅ‚a." â†’ hedging wygrywa â†’ overcertainty **0 pkt**, hedging **-2 pkt**

---

**âš ï¸ CAP dla caÅ‚ego kanaÅ‚u TREÅšÄ†: 35 pkt**

---

### 3. MONETYZACJA (monetization) - waga: 5%

#### ğŸ’° **Affiliate links**
**+4 pkt za kaÅ¼de trafienie** (cap: 12 pkt max)

Wykrywane frazy:
- `affiliate`, `partner link`, `kup teraz`, `tylko dziÅ›`

---

#### ğŸŸï¸ **Kupony/CTA**
**+3 pkt za kaÅ¼de trafienie** (cap: 9 pkt max)

Wykrywane frazy:
- `rabat`, `kupon`, `promocja`

**PrzykÅ‚ad**: "Kup teraz z rabatem! Partner link z kuponem tylko dziÅ›!" â†’ +4 (kup teraz) +4 (partner link) +3 (rabat) +3 (kupon) = **+12 pkt (cap affiliate) + 6 pkt (kupony) = 18 pkt total, ale cap monetization = 10**

---

**âš ï¸ CAP dla caÅ‚ego kanaÅ‚u MONETIZATION: 10 pkt**

---

### 4. ROZBIEÅ»NOÅšCI (mismatch) - waga: 40% âš ï¸ NAJWAÅ»NIEJSZY KANAÅ

#### ğŸ¯ **Low alignment** (niska zgodnoÅ›Ä‡ tytuÅ‚-treÅ›Ä‡)
**+18 pkt penalty** jeÅ›li alignment_score < 0.45

**Alignment score** = stosunek obietnic z tytuÅ‚u potwierdzonych w treÅ›ci

**PrzykÅ‚ad**:
- TytuÅ‚: "Naukowcy odkryli 5 sekretÃ³w dÅ‚ugowiecznoÅ›ci"
- TreÅ›Ä‡ wspomina tylko 2 sekrety â†’ alignment = 2/5 = 0.40 < 0.45 â†’ **+18 pkt penalty**

---

#### âš–ï¸ **Medium alignment** (Å›rednia zgodnoÅ›Ä‡)
**+8 pkt penalty** jeÅ›li alignment_score < 0.65

**PrzykÅ‚ad**:
- TytuÅ‚: "10 sposobÃ³w na zdrowie"
- TreÅ›Ä‡ wspomina 6 sposobÃ³w â†’ alignment = 6/10 = 0.60 < 0.65 â†’ **+8 pkt penalty**

---

#### ğŸ“ **Exaggeration gap** (luka przesady)
**+14 pkt penalty**

**Warunki**:
1. TytuÅ‚ zawiera `sensational` LUB `alarming` frazy
2. **ORAZ** treÅ›Ä‡ zawiera redukcje wiarygodnoÅ›ci:
   - Credibility signals (nazwy org., cytaty, liczby)
   - Hedging (`moÅ¼e`, `prawdopodobnie`)

**Logika**: Sensacyjny tytuÅ‚ + ostroÅ¼na/wiarygodna treÅ›Ä‡ = manipulacja emocjami w tytule

**PrzykÅ‚ad**:
- TytuÅ‚: "SZOK! Rewolucyjne odkrycie naukowcÃ³w!"
- TreÅ›Ä‡: "Naukowcy z Uniwersytetu Warszawskiego sugerujÄ…, Å¼e moÅ¼e to wskazywaÄ‡..."
- â†’ Sensational w tytule (szok, rewolucyjne) + credibility (UW) + hedging (moÅ¼e, sugerujÄ…) â†’ **+14 pkt**

---

#### ğŸ’° **Paywall / za krÃ³tka treÅ›Ä‡**
**+22 pkt penalty**

**Warunek**: TreÅ›Ä‡ < 500 znakÃ³w

**Logika**: NiemoÅ¼liwa weryfikacja obietnic z tytuÅ‚u = clickbait

---

#### ğŸŒ **Country mismatch** (rozbieÅ¼noÅ›Ä‡ geograficzna)
**+18 pkt penalty**

**Warunki**:
1. **TytuÅ‚** wspomina kraj (np. "w Polsce", "u nas") LUB
2. JeÅ›li tytuÅ‚ NIE wspomina kraju: system **domyÅ›lnie zakÅ‚ada "Polska"** (`assume_title_local_if_missing: true`)
3. **TreÅ›Ä‡** wyraÅºnie odnosi siÄ™ do **innego kraju** (np. "we Francji", "w Niemczech")

**PrzykÅ‚ady**:

âœ… **MISMATCH (penalty +18 pkt)**:
- TytuÅ‚: "SzokujÄ…ce odkrycie naukowcÃ³w" (domyÅ›lnie = Polska)
- TreÅ›Ä‡: "Badanie przeprowadzono we Francji..."

âœ… **MISMATCH (penalty +18 pkt)**:
- TytuÅ‚: "Dramat w Polsce! Ludzie w szoku"
- TreÅ›Ä‡: "Jak donoszÄ… media niemieckie, w Berlinie..."

âŒ **BRAK MISMATCH**:
- TytuÅ‚: "Odkrycie naukowcÃ³w w Polsce"
- TreÅ›Ä‡: "Polski zespÃ³Å‚ z Uniwersytetu Warszawskiego..."

âŒ **BRAK MISMATCH**:
- TytuÅ‚: "Rewolucja we Francji"
- TreÅ›Ä‡: "Francuscy naukowcy odkryli..."

---

#### â° **Time omission** (brak ram czasowych w tytule)
**+12 pkt penalty**

**Warunki** (wszystkie muszÄ… byÄ‡ speÅ‚nione):
1. TreÅ›Ä‡ zawiera **wykryte ramy czasowe** (np. "w zeszÅ‚ym roku", "przed miesiÄ…cem", "od 2020 roku")
2. TytuÅ‚ **nie zawiera** ram czasowych
3. **DODATKOWO**: TytuÅ‚ jest **sensacyjny LUB alarmujÄ…cy** (`apply_only_if_title_sensational_or_alarming: true`)

**Logika**: Ukrywanie kontekstu czasowego w sensacyjnych tytuÅ‚ach = manipulacja (stara wiadomoÅ›Ä‡ jako nowa sensacja)

**PrzykÅ‚ady**:

âœ… **PENALTY +12 pkt**:
- TytuÅ‚: "SZOK! Naukowcy odkryli nowy gatunek" (sensacyjny + brak ram czasowych)
- TreÅ›Ä‡: "W 2015 roku zespÃ³Å‚ odkryÅ‚..."

âŒ **BRAK PENALTY**:
- TytuÅ‚: "Naukowcy odkryli nowy gatunek" (neutralny + brak ram czasowych)
- TreÅ›Ä‡: "W 2015 roku zespÃ³Å‚ odkryÅ‚..."
- PowÃ³d: TytuÅ‚ nie jest sensacyjny/alarmujÄ…cy

âŒ **BRAK PENALTY**:
- TytuÅ‚: "SZOK! W 2015 roku naukowcy odkryli nowy gatunek" (zawiera ramÄ™ czasowÄ…)
- TreÅ›Ä‡: "W 2015 roku zespÃ³Å‚ odkryÅ‚..."

---

#### ğŸ“… **Date omission** (brak konkretnych dat w tytule)
**+8 pkt penalty**

Analogicznie do time_omission, ale dla **konkretnych dat** (np. "15 marca 2023").

---

**âš ï¸ CAP dla caÅ‚ego kanaÅ‚u MISMATCH: 30 pkt**

---

## Punkty ujemne - cechy wiarygodne

### ğŸ“ **Credibility signals** (sygnaÅ‚y wiarygodnoÅ›ci)

#### **Org names** (nazwy organizacji)
**-3 pkt za kaÅ¼de trafienie** (cap: -12 pkt max)

Wykrywane nazwy:
- **Czasopisma naukowe**: `nature`, `science`, `cell`, `pnas`, `arxiv`, `doi`, `journal`
- **Instytucje**: `esrf`, `diamond light source`, `IMGW`, `GUS`, `BiaÅ‚y Dom`
- **Uczelnie**: `uniwersytet`, `UW`, `AGH`, `instytut`
- **Media**: `rmf24`

**PrzykÅ‚ad**: "WedÅ‚ug badania opublikowanego w Nature przez Uniwersytet Warszawski..." â†’ -3 (nature) -3 (uniwersytet) = **-6 pkt**

---

#### **Numbers/dates/units** (liczby, daty, jednostki)
**-2 pkt za kaÅ¼de trafienie** (cap: -10 pkt max)

Wykrywane: konkretne liczby, daty, jednostki miary (np. "1500 osÃ³b", "15 marca 2023", "25 km/h")

**PrzykÅ‚ad**: "Badanie objÄ™Å‚o 1500 osÃ³b w okresie 2020-2023 na obszarze 250 kmÂ²" â†’ -2 -2 -2 = **-6 pkt**

---

#### **Quoted speakers** (cytowani eksperci)
**-2 pkt za kaÅ¼de trafienie** (cap: -8 pkt max)

Wykrywane: cytaty ekspertÃ³w w cudzysÅ‚owie z podaniem nazwiska/funkcji

**PrzykÅ‚ad**: "Jak powiedziaÅ‚ prof. Kowalski: 'To przeÅ‚omowe odkrycie'" â†’ **-2 pkt**

---

#### **Methods terms** (terminologia naukowa)
**-2 pkt za kaÅ¼de trafienie** (cap: -8 pkt max)

Wykrywane sÅ‚owa:
- `skan`, `skanowanie`, `synchrotron`, `rentgen`
- `analiza morfologiczna`, `metoda`, `badanie`
- `metaanaliza`, `ankieta reprezentatywna`

**PrzykÅ‚ad**: "ZespÃ³Å‚ uÅ¼yÅ‚ skanowania synchrotronowego i analizy morfologicznej..." â†’ -2 (skan) -2 (analiza) = **-4 pkt**

---

### ğŸ¤” **Hedging** (ostroÅ¼ne sformuÅ‚owania)

#### **Hedging terms**
**-2 pkt za kaÅ¼de trafienie** (cap: -10 pkt max)

Wykrywane sÅ‚owa:
- `moÅ¼e`, `prawdopodobnie`, `sugeruje`, `wskazuje`, `wydaje siÄ™`, `moÅ¼liwe`

âš ï¸ **KLUCZOWA ZASADA - MUTUAL EXCLUSION**:
Gdy hedging i overcertainty kolidujÄ… â†’ **HEDGING ZAWSZE WYGRYWA**

**PrzykÅ‚ad**:
- Tekst: "MoÅ¼e to dziaÅ‚a. Prawdopodobnie skuteczne. Wydaje siÄ™ obiecujÄ…ce."
- â†’ -2 (moÅ¼e) -2 (prawdopodobnie) -2 (wydaje siÄ™) = **-6 pkt**

---

## Trafienia semantyczne

System preferuje **regex** jako ÅºrÃ³dÅ‚o prawdy, ale dopuszcza **trafienia semantyczne** od LLM (model jÄ™zykowy):

### Zasady hybrydowe (PREFER_REGEX_WITH_SEMANTIC):

1. **Regex ma priorytet** - jeÅ›li regex zÅ‚apaÅ‚ danÄ… frazÄ™, semantyka nie dodaje punktÃ³w
2. **Confidence threshold**: 0.85 - minimalna pewnoÅ›Ä‡ LLM aby zgÅ‚osiÄ‡ trafienie
3. **Weight multiplier**: 0.5 - trafienia semantyczne liczÄ… siÄ™ z wagÄ… **50%**
4. **Oznaczenie**: KaÅ¼de trafienie musi byÄ‡ oznaczone jako `"semantic:<opis>"`

### PrzykÅ‚ad trafienia semantycznego:

**TytuÅ‚**: "To odmieni twoje Å¼ycie na zawsze"

**Analiza**:
- Regex nie wykrywa dokÅ‚adnie "odmieni twoje Å¼ycie" (brak w liscie)
- LLM rozpoznaje semantycznie jako **sensational phrase** z confidence 0.92

```json
"title_semantic_hits": [
  {
    "text": "odmieni twoje Å¼ycie na zawsze",
    "confidence": 0.92,
    "category": "sensational"
  }
]
```

**Punktacja**: +12 pkt (sensational) Ã— 0.5 (multiplier) = **+6 pkt**

---

## KoÅ„cowe przeliczenie

### FormuÅ‚a:

```
raw_score = (title_points Ã— 0.40) + 
            (content_points Ã— 0.15) + 
            (mismatch_penalties Ã— 0.40) + 
            (monetization_points Ã— 0.05) +
            credibility_reductions +
            hedging_reductions
```

### Capy (limity):

```yaml
per_channel:
  title: 60 pkt
  content: 35 pkt
  mismatch: 30 pkt
  monetization: 10 pkt

overall: 100 pkt  # maksymalny moÅ¼liwy score
```

### ZaokrÄ…glenie:

Wynik jest zaokrÄ…glany do **najbliÅ¼szej 5**:
- 67 â†’ 65
- 73 â†’ 75
- 48 â†’ 50
- 52 â†’ 50

### Penalty relaxation (Å‚agodzenie kar):

Dla zaufanych ÅºrÃ³deÅ‚ moÅ¼na zmniejszyÄ‡ kary:

```yaml
rmf24.pl:
  base_reputation: "medium"
  penalty_relaxation: 1

focus.pl:
  base_reputation: "medium"
  penalty_relaxation: 2

.gov.pl:
  base_reputation: "high"
  penalty_relaxation: 4
```

Penalty relaxation odejmuje siÄ™ od kar mismatch przed zastosowaniem cap.

---

## Etykiety i interpretacja

### Progi etykiet:

| Score | Etykieta | Znaczenie | Akcja |
|-------|----------|-----------|-------|
| **0-24** | `not_clickbait` | ArtykuÅ‚ informacyjny, przejrzysty | Brak akcji |
| **25-49** | `mild` | Lekkie cechy clickbaitowe | Sugestie neutralnego tytuÅ‚u |
| **50-74** | `strong` | WyraÅºny clickbait | Notify + rekomendowany tytuÅ‚ |
| **75-100** | `extreme` | Skrajny clickbait | Flag + kolejka do rewizji |

### Normalizacja etykiet:

System automatycznie normalizuje synonimy:

```yaml
none â†’ not_clickbait
weak â†’ mild
moderate â†’ mild
```

### Akcje decyzyjne:

```yaml
extreme (75-100):
  action: "flag_and_queue"
  notes: "Wysoki priorytet do rewizji redakcyjnej i automatycznej rekomendacji tytuÅ‚u"

strong (50-74):
  action: "notify_and_suggest"
  notes: "PokaÅ¼ rekomendowany tytuÅ‚ i listÄ™ sygnaÅ‚Ã³w"

mild (25-49):
  action: "suggest_only"
  notes: "WyÅ›wietl sugestie neutralnego tytuÅ‚u"

not_clickbait (0-24):
  action: "no_action"
  notes: "Brak dziaÅ‚aÅ„"
```

---

## PrzykÅ‚ad kalkulacji

### ArtykuÅ‚ testowy:

**TytuÅ‚**: `"NIE UWIERZYSZ! SzokujÄ…ce odkrycie naukowcÃ³w w Polsce"`

**TreÅ›Ä‡**: 850 znakÃ³w, cytuje Uniwersytet Warszawski i prof. Kowalskiego, zawiera:
- "moÅ¼e wskazywaÄ‡ na przeÅ‚om"
- "badanie z 2015 roku objÄ™Å‚o 1500 osÃ³b"
- "sugeruje dalsze badania"

---

### Krok 1: Analiza tytuÅ‚u

| Cecha | Trafienie | Punkty |
|-------|-----------|--------|
| **Curiosity gap** | "NIE UWIERZYSZ" | +6 |
| **Sensational** | "SzokujÄ…ce" | +12 |
| **Punctuation - wykrzyknik** | "!" | +3 |
| **Punctuation - CAPSLOCK** | "NIE UWIERZYSZ" | +6 |
| **Superlatives** | Brak | 0 |
| **Absolutes** | Brak | 0 |
| **Alarming** | Brak | 0 |

**SUMA TYTUÅ**: +27 pkt (poniÅ¼ej cap 60)

---

### Krok 2: Analiza treÅ›ci

| Cecha | Trafienie | Punkty |
|-------|-----------|--------|
| **Sensational phrases** | Brak w â‰¥2 oknach | 0 |
| **Overcertainty** | Brak | 0 |

**SUMA TREÅšÄ†**: 0 pkt

---

### Krok 3: RozbieÅ¼noÅ›ci (mismatch)

| Cecha | Warunek | Punkty |
|-------|---------|--------|
| **Alignment score** | 0.75 (dobry) | 0 |
| **Exaggeration gap** | Sensational w tytule + hedging w treÅ›ci â†’ TAK | +14 |
| **Country mismatch** | TytuÅ‚ "w Polsce", treÅ›Ä‡ teÅ¼ "Uniwersytet Warszawski" â†’ NIE | 0 |
| **Time omission** | TreÅ›Ä‡ ma "2015 roku", tytuÅ‚ nie ma + tytuÅ‚ sensacyjny â†’ TAK | +12 |
| **Paywall/short** | 850 znakÃ³w > 500 â†’ NIE | 0 |

**SUMA MISMATCH**: +26 pkt (poniÅ¼ej cap 30)

---

### Krok 4: Monetyzacja

Brak affiliate/kuponÃ³w â†’ **0 pkt**

---

### Krok 5: Redukcje wiarygodnoÅ›ci

| Cecha | Trafienie | Punkty |
|-------|-----------|--------|
| **Org names** | "Uniwersytet Warszawski" | -3 |
| **Quoted speakers** | "prof. Kowalski" | -2 |
| **Numbers/dates** | "2015 roku", "1500 osÃ³b" | -4 |
| **Methods** | "badanie" | -2 |

**SUMA CREDIBILITY**: -11 pkt

---

### Krok 6: Hedging

| Cecha | Trafienie | Punkty |
|-------|-----------|--------|
| **Hedging terms** | "moÅ¼e", "sugeruje" | -4 |

**SUMA HEDGING**: -4 pkt

---

### Krok 7: KoÅ„cowe przeliczenie

```
raw_score = (27 Ã— 0.40) + (0 Ã— 0.15) + (26 Ã— 0.40) + (0 Ã— 0.05) + (-11) + (-4)

raw_score = 10.8 + 0 + 10.4 + 0 - 11 - 4
raw_score = 6.2
```

**ZaokrÄ…glenie**: 6.2 â†’ **5**

**Etykieta**: `not_clickbait` (0-24)

**Interpretacja**: Mimo sensacyjnego tytuÅ‚u ("NIE UWIERZYSZ", "SzokujÄ…ce"), wysoka wiarygodnoÅ›Ä‡ treÅ›ci (cytaty, liczby, uniwersytet, hedging) oraz brak innych problemÃ³w sprawiÅ‚y, Å¼e finalny wynik jest **niski**. System wykryÅ‚ exaggeration gap i time omission, ale redukcje za credibility i hedging przewaÅ¼yÅ‚y.

---

### Co by zmieniÅ‚o wynik?

**Scenariusz A**: Brak credibility i hedging w treÅ›ci
```
raw_score = 10.8 + 0 + 10.4 + 0 = 21.2 â†’ zaokrÄ…glenie 20
Etykieta: not_clickbait (blisko mild)
```

**Scenariusz B**: Dodatkowo low alignment (< 0.45)
```
mismatch = 26 + 18 = 44, ale cap = 30
raw_score = 10.8 + 0 + (30 Ã— 0.40) + 0 = 10.8 + 12 = 22.8 â†’ zaokrÄ…glenie 25
Etykieta: mild
```

**Scenariusz C**: Dodatkowo wiÄ™cej sensational w tytule + brak redukcji
```
title = 27 + 12 (absolutes "zawsze") = 39
mismatch = 30 (cap)
raw_score = (39 Ã— 0.40) + 0 + (30 Ã— 0.40) + 0 = 15.6 + 12 = 27.6 â†’ zaokrÄ…glenie 30
Etykieta: mild
```

---

## Kluczowe zasady

### 1. ğŸ¯ **Regex > Semantyka**
Wzorce regex majÄ… zawsze **pierwszeÅ„stwo** nad trafieniam semantycznymi LLM. Semantyka dziaÅ‚a jako uzupeÅ‚nienie z wagÄ… 50%.

### 2. ğŸ¤” **Hedging zawsze wygrywa**
Gdy w tekÅ›cie wystÄ™puje `moÅ¼e` + `na pewno` â†’ liczy siÄ™ **tylko hedging** (-2 pkt), overcertainty jest ignorowane (mutual exclusion rule).

### 3. ğŸªŸ **Minimum windows dla treÅ›ci**
Sensational phrases w treÅ›ci muszÄ… wystÄ…piÄ‡ w **â‰¥2 rÃ³Å¼nych oknach** (z 5 okien prÃ³bkowania) aby zostaÄ‡ zliczone. Zapobiega to faÅ‚szywym alarmom od pojedynczych wzmianek.

### 4. ğŸŒ **Geography default**
JeÅ›li tytuÅ‚ **nie wspomina kraju**, system domyÅ›lnie zakÅ‚ada **"Polska"** dla celÃ³w wykrywania country mismatch (`assume_title_local_if_missing: true`).

### 5. â° **Time omission tylko dla sensacyjnych**
Kara za brak ram czasowych w tytule jest stosowana **TYLKO** gdy tytuÅ‚ jest sensacyjny lub alarmujÄ…cy (`apply_only_if_title_sensational_or_alarming: true`). Neutralne tytuÅ‚y bez ram czasowych nie sÄ… karane.

### 6. ğŸ”¢ **ZaokrÄ…glenie do 5**
Wszystkie wyniki sÄ… zaokrÄ…glane do najbliÅ¼szej 5:
- 67 â†’ 65
- 73 â†’ 75
- 48 â†’ 50

### 7. ğŸšï¸ **Capy per channel**
KaÅ¼dy kanaÅ‚ ma wÅ‚asny limit punktÃ³w:
- TytuÅ‚: max 60 pkt
- TreÅ›Ä‡: max 35 pkt
- Mismatch: max 30 pkt
- Monetyzacja: max 10 pkt
- **Overall**: max 100 pkt

### 8. ğŸ“Š **Wagi nierÃ³wnomierne**
KanaÅ‚y majÄ… rÃ³Å¼ne wagi:
- **TytuÅ‚ + Mismatch**: 80% (40% + 40%) - najwaÅ¼niejsze
- **TreÅ›Ä‡**: 15%
- **Monetyzacja**: 5%

### 9. âœ… **Deterministic mode**
System dziaÅ‚a w trybie deterministycznym (seed: 42) - te same dane zawsze dajÄ… ten sam wynik. Dla trafieÅ„ semantycznych wymagane jest podanie confidence i racjonalizacji.

### 10. ğŸš« **Fail-fast dla insufficient content**
JeÅ›li treÅ›Ä‡ < 500 znakÃ³w lub paywall â†’ natychmiastowy zwrot etykiety `insufficient_content` bez dalszej analizy.

---

## Podsumowanie przepÅ‚ywu

```mermaid
graph TD
    A[ArtykuÅ‚: tytuÅ‚ + treÅ›Ä‡] --> B{TreÅ›Ä‡ â‰¥ 500 znakÃ³w?}
    B -->|NIE| C[insufficient_content]
    B -->|TAK| D[Sampling: 5 okien x 600 znakÃ³w]
    D --> E[Analiza tytuÅ‚u: regex + semantyka]
    D --> F[Analiza treÅ›ci: regex + semantyka z min windows]
    E --> G[Punkty dodatnie: sensational, curiosity, absolutes...]
    F --> G
    G --> H[Punkty ujemne: credibility, hedging]
    H --> I[Mismatch: alignment, exaggeration, country, time]
    I --> J[Zastosuj wagi: 40% 15% 40% 5%]
    J --> K[Zastosuj capy per channel]
    K --> L[ZaokrÄ…glij do 5]
    L --> M[Przypisz etykietÄ™: not/mild/strong/extreme]
    M --> N[ZwrÃ³Ä‡ JSON z score, label, rationale, signals]
```

---

**Wersja dokumentu**: 1.0  
**Ostatnia aktualizacja**: 2025-10-29  
**Bazuje na**: `clickbait_agent_spec_v1.1.yaml` (version 1.2.3)
